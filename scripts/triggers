DROP TRIGGER [dbo].[UpdateStatusOnUserType]
DROP TRIGGER [dbo].[SetRemainingPositions]



CREATE TRIGGER [dbo].[UpdateStatusOnUserType]
ON [dbo].[User]
AFTER INSERT
AS
BEGIN
    -- Update the Status to 'approved' for new records where User_Type is 'Admin' or 'Applicant'
    UPDATE U
    SET [Status] = 'approved'
    FROM [dbo].[User] U
    INNER JOIN INSERTED I ON U.User_ID = I.User_ID
    WHERE I.User_Type IN ('Admin', 'Applicant');
END
GO

CREATE TRIGGER [dbo].[SetRemainingPositions]
ON Sponsorship_Category
AFTER INSERT
AS
BEGIN
    -- Update Remaining_Positions to be the same as Total_Positions for the inserted record(s)
    UPDATE Sponsorship_Category
    SET Remaining_Positions = Total_Positions
    WHERE Category_Number IN (SELECT Category_Number FROM INSERTED);
END;
GO
